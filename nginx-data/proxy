upstream _squid {
#    server proxy.example.org:3128;
	server localhost;
}

server {
        resolver        10.5.0.4;
resolver_timeout 10s;
        access_log      /var/log/nginx/proxy-access.log;
        listen  0.0.0.0:8080;
        location / {
		resolver        10.5.0.4;
resolver_timeout 10s;
	
		set $squid proxy.example.org:3128;
                proxy_pass http://$squid;
                proxy_set_header Host $http_host;
                proxy_buffers   256 4k;
                proxy_max_temp_file_size        0k;
        }
}

